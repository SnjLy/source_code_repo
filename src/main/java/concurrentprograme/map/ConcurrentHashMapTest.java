package concurrentprograme.map;import com.alibaba.fastjson.JSON;import org.junit.Test;import java.util.concurrent.ConcurrentHashMap;/** * Created by admin on 2017/6/22. */public class ConcurrentHashMapTest {    private static int hash(Object k) {        int h = 0;        h ^= k.hashCode();//首先先得到初始的hash        h += (h << 15) ^ 0xffffcd7d; h ^= (h >>> 10);        h += (h << 3); h ^= (h >>> 6);        h += (h << 2) + (h << 14); return h ^ (h >>> 16);    }    @Test    public void  testMap(){        ConcurrentHashMap<String, Object> map = new ConcurrentHashMap<>();        System.out.println(JSON.toJSONString(map));        map.put("hello", "hello world");        map.put("world", "new world");        map.put("hello", "new hello world");        System.out.println(JSON.toJSONString(map));        map.get("hello");        boolean contains = map.containsKey("hello");        System.out.println(contains);        boolean contain = map.containsKey("world");        System.out.println(contain);        System.out.println(map.size());        map.clear();        System.out.println(JSON.toJSONString(map));    }    @Test    public void testHash(){        System.out.println(Integer.parseInt("0001111", 2) & 15);        System.out.println(Integer.parseInt("0011111", 2) & 15);        System.out.println(Integer.parseInt("0111111", 2) & 15);        System.out.println(Integer.parseInt("1111111", 2) & 15);        System.out.println("--------------------------------------");        int hash1 = ConcurrentHashMapTest.hash(15);        int hash2 = ConcurrentHashMapTest.hash(31);        int hash3 = ConcurrentHashMapTest.hash(63);        int hash4 = ConcurrentHashMapTest.hash(127);        System.out.println(hash1);        System.out.println(hash2);        System.out.println(hash3);        System.out.println(hash4);        System.out.println("--------------------------------------");        System.out.println((hash1 >>> 28) & 15);        System.out.println((hash2 >>> 28) & 15);        System.out.println((hash3 >>> 28) & 15);        System.out.println((hash4 >>> 28) & 15);    }}